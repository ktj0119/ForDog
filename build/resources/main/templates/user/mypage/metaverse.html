<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ForDog - ë©”íƒ€ë²„ìŠ¤ í™œë™ í˜„í™©</title>
  <link rel="stylesheet" th:href="@{/css/userInterface.css}"/>
  <link rel="stylesheet" th:href="@{/css/userCommon.css}"/>
  <link rel="stylesheet" th:href="@{/css/userSideBar.css}"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <style>
    h2 {
        margin-bottom: 30px !important;
    }

.metaverse-item {
position: relative;
background: #fff;
border-radius: 12px;
padding: 20px;
box-shadow: 0 4px 10px rgba(0,0,0,0.08);
margin-bottom: 30px;
}

.metaverse-item h2 {
margin-bottom: 15px;
}

.metaverse-progress {
display: flex;
flex-direction: column; /* ì„¸ë¡œ ë°°ì¹˜ */
width: 100%;
padding: 30px;
}

.home {
position: absolute;
right: 6%;
top: 120px;
width: 60px;
height: 60px;
display: block;
}


/* process-bar ì•ˆ ì•„ì´í…œ ê°€ë¡œ ì •ë ¬ */
.process-bar {
margin-top: 80px;
display: flex;
align-items: center;
position: relative;
gap: 10px; /* ì› ì‚¬ì´ ê°„ê²© */
}

/* ê° ì›í˜• + ê¸€ì ë¬¶ìŒ */
.process-bar > div {
position: relative;
flex: 1;
display: flex;
flex-direction: column; /* ì›í˜• ìœ„/ì•„ë˜ ì„¸ë¡œ ë°°ì¹˜ */
align-items: center;
width: 20px;
}

/* ì›í˜• */
.circle {
width: 20px;
height: 20px;
border-radius: 50%;
background-color: #ccc;
transition: background-color 0.3s;
}

/* ê° ì›í˜• ì•„ì´í…œ ì•ì— ì„  ìƒì„±, ì²« ì•„ì´í…œ ì œì™¸ */
.process-bar > div::after {
content: '';
position: absolute;
top: 25%;
right: 50%;           /* ì™¼ìª½ìœ¼ë¡œ ë»—ìŒ */
height: 4px;
background-color: #ccc;
width: 100%;
transform: translateY(-50%);
z-index: 0;
}

.process-bar > div:first-child::after {
content: none;
}

/* í™œì„±í™”ëœ ì› */
.process-bar > div.active .circle {
background-color: var(--highlight); /* ë©”ì¸ ìƒ‰ìƒ */
}

/* í™œì„±í™”ëœ ì„  */
.process-bar > div.active::after {
background-color: var(--highlight); /* ë©”ì¸ ìƒ‰ìƒ */
}

/* ì›í˜• ì•„ë˜ ê¸€ì */
.sceneName {
margin-top: 5px;
text-align: center;
font-size: 12px;
font-weight: bold;
}

.dog {
position: absolute;
top: -55px;   /* ì› ìœ„ë¡œ ë„ìš°ê¸° */
font-size: 40px;
transform: scaleX(-1); /* ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ë³´ê¸° ì›í•˜ë©´ */
}

.heart{
  position: absolute;
  width: 20px;
  height: 30px;
  top: -70px;
  right: 65px;
}
  </style>
</head>
<body>
<!-- í—¤ë” / ë„¤ë¹„ê²Œì´ì…˜ -->
<div th:replace="header/userHeader :: userHeader"></div>

<!-- ë©”ì¸ í™”ë©´ -->
<main>
  <!-- ë§ˆì´í˜ì´ì§€ ë°” -->
  <div th:replace="header/userSideBar :: mypageBar"></div>

  <!-- ë©”ì¸ -->
  <div class="container">
    <h2>ë©”íƒ€ë²„ìŠ¤ í™œë™ í˜„í™©</h2>

    <div class="metaverse-item" th:each="metaverseName, metaverseNameLoop : ${metaverseNameList}">
      <h3>[[${metaverseName}]] ì§„í–‰ í˜„í™©</h3>

      <div class="metaverse-progress">

        <div th:if="${metaverseNameLoop.index == 0}">
          <img class="home" src="/img/doghouse.png" alt="ê°•ì•„ì§€ ì§‘ ì•„ì´ì½˜"/>
          <div class="line"></div>
          <div class="process-bar">
            <div th:each="daheeScene, index : ${daheeSceneList}"
                 th:classappend="${index.index} < ${daheeProcessStage} ? 'active' : ''">
              <img class="heart" src="/img/dogheart.png" alt="í•˜íŠ¸"
                   th:if="${index.index + 1 == #lists.size(daheeSceneList) and daheeProcessStage == #lists.size(daheeSceneList)}">
              <div class="dog" th:if="${index.index + 1 == daheeProcessStage}">ğŸ•</div>
              <div class="circle"></div>
              <div class="sceneName">[[${daheeScene}]]</div>
            </div>
          </div>
        </div>

        <div th:if="${metaverseNameLoop.index == 1}">
          <img class="home" src="/img/doghouse.png" alt="ê°•ì•„ì§€ ì§‘ ì•„ì´ì½˜"/>
          <div class="line"></div>
          <div class="process-bar">
            <div th:each="haechanScene, index : ${haechanSceneList}"
                 th:classappend="${index.index} < ${haechanProcessStage} ? 'active' : ''">
              <img class="heart" src="/img/dogheart.png" alt="í•˜íŠ¸"
                   th:if="${index.index + 1 == #lists.size(haechanSceneList) and haechanProcessStage == #lists.size(haechanSceneList)}">
              <div class="dog" th:if="${index.index + 1 == haechanProcessStage}">ğŸ•</div>
              <div class="circle"></div>
              <div class="sceneName">[[${haechanScene}]]</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- í‘¸í„° -->
<div th:replace="header/userFooter :: userFooter"></div>
</body>
</html>